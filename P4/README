CS 214 Fall 2025 - Project IV: Nim
==========================================

Team Members:
- Dennis Chen : dc1707
- Timothy Wu : tw667

Code breakdown:
The file nimd.c consists of three main parts: game, player, and client_thread/main
game handles the game logic, player represents a player, and client_threadmain handles the server logic and multithreading.

Game:
the Game struct stores two players, the board including 5 piles, and whose turn it is (1 or 2)
the game_start function is the main game loop, and it begins by sending the player names, board state, and current turn. 
It manages receiving and validating moves (validation based on the error codes provided in the writeup), and proceeds
to update the board and swap turns. 
Every move, the game checks if the game is over by iterating over the board array and checking the contents of each pile.
Once the function detects that every pile has the value 0, the game_start loop ends and OVER messages are sent.

Player: 
Each player is represented with a Player struct, which includes their name, socket, and status flags,
including other boolean acting int variables to handle errors. 
To manage players, there are functions to handle creating/initializing, destroying, parsing, sending,
and receiving messages. 

client_thread/main:
there exists a waiting queue, with a max of 8 players, for players who are in the process of matching
Each client has their own client_thread, which receives OPEN message with player name, validates name length 
and uniqueness, sends WAIT message while waiting for an opponent, and starts a game whenever there are two
players available. 

The main server loop accepts incoming connections, and spawns client threads. Once the server is told to stop,
the server handles SIGINT, SIGUP, and SIGTERM signals and then shuts down

Communication Protocol:
NGP messages, with each field separated by a '|'
Client types: OPEN, MOVE
Server types: WAIT, NAME, PLAY, OVER, FAIL

Known Limitations:
Player names are limited to 72 characters
Max queue size for the waiting_list is 8
Maximum message length of 104 bytes



Project IV test programs
========================

This archive contains two programs you may use to test your
implementation of nimd.

testc
-----

    Usage: testc <host> <port> <name>

testc is a basic client for the Nim game service. Users specify
the host and port of the server they wish to connect to and their
name. testc will then set up the connection, wait to be matched
into a game, and prompt the player to choose a pile and an amount
of stones to remove when it is their turn.

testc will prevent the user from moving out of turn, or from making
illegal moves.

rawc
----

    Usage: rawc <host> <port>

rawc opens a connection to the specified host and service and waits
for input from standard input or from the connection.

Data received from standard input will be transmitted to the remote
host, except for any trailing newline character.

Data received from the remote host will be printed to standard
output, with special attention for control and high-ASCII characters,
which might otherwise be missed.

Note that rawc has no knowledge of understanding of NGP, so you
will need to formulate correct messages yourself. Obviously, this
is only useful for debugging, when you want to control exactly what
bytes are sent to the server or see exactly what bytes you have
received.

The source code for rawc is included.
