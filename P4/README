CS 214 Fall 2025 - Project IV: Nim
==========================================

Team Members:
- Dennis Chen : dc1707
- Timothy Wu : tw667

Code breakdown:
The file nimd.c consists of three main parts: game, player, and client_thread/main
game handles the game logic, player represents a player, and client_threadmain handles the server logic and multithreading.
The server handles single games, concurrent games, and the extra credit

Game:
the Game struct stores two players, the board including 5 piles, and whose turn it is (1 or 2)
the game_start function is the main game loop, and it begins by sending the player names, board state, and current turn. 
It manages receiving and validating moves (validation based on the error codes provided in the writeup), and proceeds
to update the board and swap turns. 
Every move, the game checks if the game is over by iterating over the board array and checking the contents of each pile.
Once the function detects that every pile has the value 0, the game_start loop ends and OVER messages are sent.
Note: piles are indexed starting at 0, so pile 1 is index 0, pile 2 is index 1, and so forth. (so when sending a NGP MOVE, the indexes correspond to pile + 1)

Player: 
Each player is represented with a Player struct, which includes their name, socket, and status flags,
including other boolean acting int variables to handle errors. 
To manage players, there are functions to handle creating/initializing, destroying, parsing, sending,
and receiving messages. 

client_thread/main:
there exists a waiting queue, with a max of 8 players, for players who are in the process of matching and those that are currently active in a game
Each client has their own client_thread, which receives OPEN message with player name, validates name length 
and uniqueness, sends WAIT message while waiting for an opponent, and starts a game whenever there are two
players available. 

The main server loop accepts incoming connections, and spawns client threads. Once the server is told to stop,
the server handles SIGINT, SIGUP, and SIGTERM signals and then shuts down

Communication Protocol:
NGP messages, with each field separated by a '|'
Client types: OPEN, MOVE
Server types: WAIT, NAME, PLAY, OVER, FAIL

Known Limitations:
Player names are limited to 72 characters
names cannot include '|', all other characters are fair game
Max queue size for the waiting_list is 8
Maximum message length of 104 bytes


Testing plan:
For every single case, try manually testing that case using rawc.
i.e. testing name length with a name of length 0, 1, 2, 71, 72, and 73 
    (message formatting was done with the python script openinputformatter.py because I was not counting 72 characters manually)
testing negative pile indices, and too big pile indices
testing 0 or negative stone removals, too big stone removals
testing closing the client connection by stopping the code
testing duplicate names by joining multiple times
testing concurrent games by opening many terminals
testing adding additional fields at the end of a message
testing adding random characters to the end of a message
testing to make sure reading too many characters gets truncated to the expected size
testing to make sure reading not enough characters results in invalid
